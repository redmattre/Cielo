<!doctype html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cielo</title>
    <script type="module" crossorigin src="/Cielo/assets/index-BZhBMHOT.js"></script>
    <link rel="stylesheet" crossorigin href="/Cielo/assets/index-HjHSCsOx.css">
  </head>
  <body>

    <div class="bottonieraSotto" id="bottonieraSotto">
      <div class="visualizzazione" id="visualizzazione">
        Prospettiva
      </div>
    </div>

    <div class="dockTasti">
      <button title="chiudi trasformazione" id="toggleTransButton" class="topButtons" style="display: none;">⏚</button>
      <button title="aggiungi elemento 3D" id="addElementMenu">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M4 12H20M12 4V20" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
      <button id="addCloudElement" style="display: none;">☁</button>
      <button title="toggle cursore POV" id="addPovCursor">
        <svg fill="currentColor" viewBox="-7 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg">
          <path d="M13.88 24.16c-0.48 0-0.84-0.36-0.84-0.84v-4.76c0-0.48 0.36-0.84 0.84-0.84s0.84 0.36 0.84 0.84v4.76c0 0.48-0.36 0.84-0.84 0.84zM3.84 24.16c-0.48 0-0.84-0.36-0.84-0.84v-4.76c0-0.48 0.36-0.84 0.84-0.84s0.84 0.36 0.84 0.84v4.76c-0.040 0.48-0.44 0.84-0.84 0.84zM16.76 21.8c-0.040 0-0.080 0-0.12 0-0.44-0.080-0.76-0.48-0.72-0.96 0-0.040 0.84-6-1.92-9.24-1.2-1.36-2.92-2.080-5.12-2.080s-3.92 0.68-5.12 2.080c-2.8 3.24-1.92 9.16-1.92 9.24 0.080 0.44-0.24 0.88-0.72 0.96-0.44 0.080-0.88-0.24-0.96-0.72-0.080-0.28-0.96-6.76 2.28-10.6 1.52-1.76 3.68-2.68 6.4-2.68s4.88 0.88 6.4 2.68c3.28 3.8 2.36 10.32 2.32 10.56-0.040 0.44-0.4 0.76-0.8 0.76z"></path>
        </svg>
      </button>
      
      <!-- Il bottone metro verrà inserito qui dinamicamente -->
      
      <button title="menu di oggetti nella scena" id="seeItemsList">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M5 7C5 6.44772 5.44772 6 6 6H18C18.5523 6 19 6.44772 19 7C19 7.55228 18.5523 8 18 8H6C5.44772 8 5 7.55228 5 7ZM5 12C5 11.4477 5.44772 11 6 11H18C18.5523 11 19 11.4477 19 12C19 12.5523 18.5523 13 18 13H6C5.44772 13 5 12.5523 5 12ZM5 17C5 16.4477 5.44772 16 6 16H18C18.5523 16 19 16.4477 19 17C19 17.5523 18.5523 18 18 18H6C5.44772 18 5 17.5523 5 17Z" fill="currentColor"/>
        </svg>
      </button>
      
      <!-- Bottoni originali nascosti ma mantenuti per backward compatibility -->
      <div style="display: none;">
        <button id="addHalo">❍</button>
        <button id="addCone">⊚</button>
        <button id="addZone">⛶</button>
        <button id="addArrow">➞</button>
        <button id="addSphere">⬤</button>
      </div>
    </div>
    
    <div id="black-panel">
      <div id="new-panel-tabs-container">
        <!-- New tab system will be inserted here -->
      </div>
      <!-- Keep original tabs hidden for now -->
      <div class="panel-tabs" style="display: none;">
        <button class="panel-tab active" data-panel="generali">G</button>
        <button class="panel-tab" data-panel="plastico">P</button>
        <button class="panel-tab" data-panel="carica">C</button>
        <button class="panel-tab" data-panel="zone">Z</button>
        <button class="panel-tab" data-panel="altoparlanti">A</button>
        <button class="panel-tab" data-panel="corone">Co</button>
      </div>
      <div class="container">
        <div class="panel-section panel-content" data-panel-content="generali" style="display:block;">
          <!-- New system will replace this content -->
          <div id="new-panel-generali-container"></div>
          
          <!-- Keep original elements hidden for backward compatibility -->
          <div style="display: none;">
            <div class="switch-wrapper">
              <label class="switch">
                <input type="checkbox" data-id="theme"/>
                <div></div>
              </label>
              <span class="switch-label">Tema Eco</span>
            </div>
            <div class="switch-wrapper">
              <label class="switch">
                <input type="checkbox" data-id="gridSnapState" checked/>
                <div></div>
              </label>
              <span class="switch-label">Aggancio Griglia</span>
            </div>
            <div class="input-wrapper">
              <label class="multitoggle">
                <input type='range' min='1' max='3' value='2' step='1' class="n n3" data-id="snapDefinition"/>
              </label>
            </div>
            <div class="switch-wrapper">
              <label class="switch">
                <input type="checkbox" data-id="lock"/>
                <div></div>
              </label>
              <span class="switch-label">Diorama</span>
            </div>
            <div class="switch-wrapper">
              <label class="switch">
                <input type="checkbox" data-id="grid" checked/>
                <div></div>
              </label>
              <span class="switch-label">Super Superficie</span>
            </div>
            <div class="input-wrapper">
              <label class="multitoggle">
                <input type='range' min='1' max='4' value='2' step='1' class="n n4" data-id="gridsize"/>
              </label>
            </div>
            <!-- Bottoni import preset -->
            <div class="input-wrapper">
              <button id="loadSpeakersPresetBtn" class="menuButton">Load Speakers</button>
            </div>
            <div class="input-wrapper">
              <button id="saveSpeakersPresetBtn" class="menuButton">Save Speakers</button>
            </div>
            <div class="input-wrapper">
              <button id="loadSourcesPresetBtn" class="menuButton">Load Sources</button>
            </div>
            <div class="input-wrapper">
              <button id="saveSourcesPresetBtn" class="menuButton">Save Sources</button>
            </div>
            <div class="input-wrapper">
              <button id="resetSceneBtn" class="menuButton">Empty</button>
            </div>
          </div>
        </div>

        <div class="panel-section panel-content" data-panel-content="plastico" style="display:none;">
          <!-- New system will replace this content -->
          <div id="new-panel-plastico-container"></div>
          
          <!-- Keep original elements hidden for backward compatibility -->
          <div style="display: none;">
            <div class="panel-title">Plastico</div>
            <button class="menuButton" id="loadPlastico">Carica</button>
            <div class="switch-wrapper">
              <label class="switch">
                <input type="checkbox" data-id="archVisibility" checked/>
                <div></div>
              </label>
              <span class="switch-label">⏿</span>
            </div>
            <label class="multitoggle">
              <span class="slider-label">Threshold</span>
              <div class="input-wrapper">
                <input type='range' min='0' max='120' value='60' step='1' class="n n4" id="plasticoThreshold"/>
              </div>
            </label>
            <label class="multitoggle">
              <span class="slider-label">Line Thickness</span>
              <div class="input-wrapper">
                <input type='range' min='0.5' max='10' value='2' step='0.1' class="n n4" id="plasticoThickness"/>
              </div>
            </label>
            <label class="multitoggle">
              <span class="slider-label">Opacity</span>
              <div class="input-wrapper">
                <input type='range' min='0.1' max='1.0' value='0.8' step='0.01' class="n n4" id="plasticoOpacity"/>
              </div>
            </label>
          </div>
        </div>

        <div class="panel-section panel-content" data-panel-content="carica" style="display:none;">
          <div id="new-panel-carica-container"></div>
          <div style="display: none;">
            <div class="panel-title">Carica Modello</div>
            <button class="button menuButton" id="loadGenericGltf">Carica</button>
          </div>
        </div>

        <div class="panel-section panel-content" data-panel-content="zone" style="display:none;">
          <div id="new-panel-zone-container"></div>
          <div style="display: none;">
            <div class="panel-title">Zone</div>
            <div class="switch-wrapper">
              <label class="switch">
                <input type="checkbox" data-id="zoneVisibility" checked/>
                <div></div>
              </label>
              <span class="switch-label">⏿</span>
            </div>
          </div>
        </div>

        <div class="panel-section panel-content" data-panel-content="altoparlanti" style="display:none;">
          <div id="new-panel-altoparlanti-container"></div>
          <div style="display: none;">
            <div class="panel-title">Altoparlanti</div>
            <div class="switch-wrapper">
              <label class="switch">
                <input type="checkbox" data-id="speakersVisibility" checked/>
                <div></div>
              </label>
              <span class="switch-label">⏿</span>
            </div>
          </div>
        </div>

        <div class="panel-section panel-content" data-panel-content="corone" style="display:none;">
          <div id="new-panel-corone-container"></div>
          <div style="display: none;">
            <div class="panel-title">Corone</div>
            <div class="switch-wrapper">
              <label class="switch">
                <input type="checkbox" data-id="speakersVisibility" checked/>
                <div></div>
              </label>
              <span class="switch-label">⏿</span>
            </div>
          </div>
        </div>

      </div>
    </div>

    <div id="infoDivTopLeft">---</div>

    <div id="infoDivCenter">
      <button id="addZoneCube" class="centeredButton">⬚</button>
      <button id="addZoneSphere" class="centeredButton">◌</button>
      <button id="closeInfoDivCenter">X</button>
    </div>

    <!-- Menu centrale per selezione elementi 3D -->
    <div id="addElementCenterMenu">
      <div class="add-menu-grid">
        <button class="add-menu-item" data-element="sphere">
          <span class="add-menu-icon">⬤</span>
          <span class="add-menu-label">Omnifonte</span>
        </button>
        <button class="add-menu-item" data-element="cone">
          <span class="add-menu-icon">⊚</span>
          <span class="add-menu-label">Altoparlante</span>
        </button>
        <button class="add-menu-item" data-element="arrow">
          <span class="add-menu-icon">➞</span>
          <span class="add-menu-label">Orifonte</span>
        </button>
        <button class="add-menu-item" data-element="halo">
          <span class="add-menu-icon">❍</span>
          <span class="add-menu-label">Aureola</span>
        </button>
        <button class="add-menu-item" data-element="zone">
          <span class="add-menu-icon">⛶</span>
          <span class="add-menu-label">Zona</span>
        </button>
        <button class="add-menu-item" data-element="plastico">
          <span class="add-menu-icon">⌘</span>
          <span class="add-menu-label">Plastico</span>
        </button>
      </div>
      
      <!-- Barra di configurazione in basso -->
      <div id="addMenuConfigBar" class="add-menu-config-bar">
        <div class="config-section">
          <label>Quantità:</label>
          <input type="number" id="elementQuantity" min="1" value="1" class="config-input">
        </div>
        
        <div class="config-section" id="arrangementSection">
          <label>Disposizione:</label>
          <select id="arrangementType" class="config-select">
            <option value="square">Quadrato</option>
            <option value="circle">Cerchio</option>
            <option value="line">Linea</option>
          </select>
        </div>
        
        <div class="config-section" id="configContextual">
          <!-- Contenuto dinamico basato sulla disposizione -->
          <div id="squareConfig">
            <div class="config-section">
              <label>Lato X (m):</label>
              <input type="number" id="squareSideX" step="0.1" value="4" class="config-input-small">
            </div>
            <div class="config-section">
              <label>Lato Z (m):</label>
              <input type="number" id="squareSideZ" step="0.1" value="4" class="config-input-small">
            </div>
          </div>
          
          <div id="circleConfig" style="display: none;">
            <div class="config-section">
              <label>Raggio (m):</label>
              <input type="number" id="circleRadius" step="0.1" value="2" class="config-input-small">
            </div>
            <div class="config-section">
              <label>Gradi:</label>
              <input type="number" id="circleAngle" min="1" max="360" value="360" class="config-input-small">
            </div>
          </div>
          
          <div id="lineConfig" style="display: none;">
            <div class="config-section">
              <label>Orientamento:</label>
              <select id="lineOrientation" class="config-select">
                <option value="horizontal">Orizzontale (X)</option>
                <option value="vertical">Verticale (Y)</option>
                <option value="perpendicular">Perpendicolare (Z)</option>
              </select>
            </div>
            <div class="config-section">
              <label>Lunghezza (m):</label>
              <input type="number" id="lineLength" step="0.1" value="4" class="config-input-small">
            </div>
          </div>
        </div>
        
        <button id="addElementExecute" class="config-add-button" disabled>Aggiungi</button>
      </div>
      
      <button id="closeAddElementMenu" class="add-menu-close">✕</button>
    </div>

    <div id="menuList"></div>

    <!-- Bottone tre puntini per aprire il menu laterale -->
    <button id="openSideMenu">&#8226; &#8226; &#8226;</button>

    <div id="selection-rectangle" style="position:fixed; pointer-events:none; border:1.5px dashed #4488ff; background:rgba(68,136,255,0.08); display:none; z-index:1000;"></div>

    <div id="scene-mask"></div>
    <div id="scene-mask-blur"></div>

    <script>
      // Old tab system - now handled by rightmenu.js
      // Keeping this as fallback but it's now managed by the new system
    </script>
  </body>
</html>
</html>
